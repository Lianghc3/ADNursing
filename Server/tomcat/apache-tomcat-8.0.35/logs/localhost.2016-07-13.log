13-Jul-2016 13:43:33.528 INFO [localhost-startStop-1] org.apache.catalina.core.ApplicationContext.log ContextListener: contextInitialized()
13-Jul-2016 13:43:33.528 INFO [localhost-startStop-1] org.apache.catalina.core.ApplicationContext.log SessionListener: contextInitialized()
13-Jul-2016 13:43:33.705 INFO [localhost-startStop-1] org.apache.catalina.core.ApplicationContext.log SessionListener: contextDestroyed()
13-Jul-2016 13:43:33.705 INFO [localhost-startStop-1] org.apache.catalina.core.ApplicationContext.log ContextListener: contextDestroyed()
13-Jul-2016 13:43:44.456 INFO [localhost-startStop-1] org.apache.catalina.core.ApplicationContext.log ContextListener: contextInitialized()
13-Jul-2016 13:43:44.456 INFO [localhost-startStop-1] org.apache.catalina.core.ApplicationContext.log SessionListener: contextInitialized()
13-Jul-2016 13:43:44.639 INFO [localhost-startStop-1] org.apache.catalina.core.ApplicationContext.log SessionListener: contextDestroyed()
13-Jul-2016 13:43:44.639 INFO [localhost-startStop-1] org.apache.catalina.core.ApplicationContext.log ContextListener: contextDestroyed()
13-Jul-2016 13:44:02.195 INFO [localhost-startStop-1] org.apache.catalina.core.ApplicationContext.log ContextListener: contextInitialized()
13-Jul-2016 13:44:02.195 INFO [localhost-startStop-1] org.apache.catalina.core.ApplicationContext.log SessionListener: contextInitialized()
13-Jul-2016 20:12:20.447 INFO [localhost-startStop-1] org.apache.catalina.core.ApplicationContext.log ContextListener: contextInitialized()
13-Jul-2016 20:12:20.447 INFO [localhost-startStop-1] org.apache.catalina.core.ApplicationContext.log SessionListener: contextInitialized()
13-Jul-2016 20:16:05.837 SEVERE [http-apr-8080-exec-9] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() for servlet [AddPostServlet] in context with path [/ADNursingServer] threw exception
 java.lang.RuntimeException: java.sql.SQLException: Cannot add or update a child row: a foreign key constraint fails (`adnursing`.`post`, CONSTRAINT `post_ibfk_1` FOREIGN KEY (`owner_id`) REFERENCES `user` (`user_id`)) Query: insert into post(post_title,post_text,post_kind,post_date,comment_num,owner_id,img_url) values(?,?,?,?,?,?,?) Parameters: [Ç÷³Û, À÷º¦, ÆÀ¼Û, Wed Jul 13 20:16:05 CST 2016, 0, -1, ]
	at com.ad.dao.impl.PostDaoImpl.save(PostDaoImpl.java:85)
	at com.ad.service.impl.BussinessServiceImpl.addPost(BussinessServiceImpl.java:210)
	at com.ad.web.controller.AddPostServlet.addPost(AddPostServlet.java:173)
	at com.ad.web.controller.AddPostServlet.doGet(AddPostServlet.java:39)
	at com.ad.web.controller.AddPostServlet.doPost(AddPostServlet.java:190)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:292)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)
	at com.ad.filter.SetAllCharacterEncodingFilter.doFilter(SetAllCharacterEncodingFilter.java:44)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:212)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:616)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:528)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1099)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:672)
	at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.doRun(AprEndpoint.java:2508)
	at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:2497)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.sql.SQLException: Cannot add or update a child row: a foreign key constraint fails (`adnursing`.`post`, CONSTRAINT `post_ibfk_1` FOREIGN KEY (`owner_id`) REFERENCES `user` (`user_id`)) Query: insert into post(post_title,post_text,post_kind,post_date,comment_num,owner_id,img_url) values(?,?,?,?,?,?,?) Parameters: [Ç÷³Û, À÷º¦, ÆÀ¼Û, Wed Jul 13 20:16:05 CST 2016, 0, -1, ]
	at org.apache.commons.dbutils.AbstractQueryRunner.rethrow(AbstractQueryRunner.java:320)
	at org.apache.commons.dbutils.QueryRunner.update(QueryRunner.java:489)
	at org.apache.commons.dbutils.QueryRunner.update(QueryRunner.java:455)
	at com.ad.dao.impl.PostDaoImpl.save(PostDaoImpl.java:78)
	... 30 more

13-Jul-2016 20:21:13.980 SEVERE [http-apr-8080-exec-10] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() for servlet [AddCommentServlet] in context with path [/ADNursingServer] threw exception
 java.lang.RuntimeException: java.sql.SQLException: Cannot add or update a child row: a foreign key constraint fails (`adnursing`.`comment`, CONSTRAINT `comment_ibfk_2` FOREIGN KEY (`post_id`) REFERENCES `post` (`post_id`)) Query: insert into comment(comment_text,comment_date,post_id,owner_id,img_url) values(?,?,?,?,?) Parameters: [Ç÷³Û¾ÍÊÇ6, Wed Jul 13 20:21:13 CST 2016, 1, 2, E:\ADNursing\image\27cd7221-c4b8-4bbd-905f-7460924ca585_3.jpg]
	at com.ad.dao.impl.CommentDaoImpl.save(CommentDaoImpl.java:92)
	at com.ad.service.impl.BussinessServiceImpl.addComment(BussinessServiceImpl.java:334)
	at com.ad.web.controller.AddCommentServlet.addComment(AddCommentServlet.java:162)
	at com.ad.web.controller.AddCommentServlet.doGet(AddCommentServlet.java:39)
	at com.ad.web.controller.AddCommentServlet.doPost(AddCommentServlet.java:179)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:292)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)
	at com.ad.filter.SetAllCharacterEncodingFilter.doFilter(SetAllCharacterEncodingFilter.java:44)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:212)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:616)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:528)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1099)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:672)
	at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.doRun(AprEndpoint.java:2508)
	at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:2497)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.sql.SQLException: Cannot add or update a child row: a foreign key constraint fails (`adnursing`.`comment`, CONSTRAINT `comment_ibfk_2` FOREIGN KEY (`post_id`) REFERENCES `post` (`post_id`)) Query: insert into comment(comment_text,comment_date,post_id,owner_id,img_url) values(?,?,?,?,?) Parameters: [Ç÷³Û¾ÍÊÇ6, Wed Jul 13 20:21:13 CST 2016, 1, 2, E:\ADNursing\image\27cd7221-c4b8-4bbd-905f-7460924ca585_3.jpg]
	at org.apache.commons.dbutils.AbstractQueryRunner.rethrow(AbstractQueryRunner.java:320)
	at org.apache.commons.dbutils.QueryRunner.update(QueryRunner.java:489)
	at org.apache.commons.dbutils.QueryRunner.update(QueryRunner.java:455)
	at com.ad.dao.impl.CommentDaoImpl.save(CommentDaoImpl.java:86)
	... 30 more

